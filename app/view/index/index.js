var navData = [{	title : "起始",	children : [{		title : '概述',		$hash : "overview"	}]},{	title : "UI组件",	children : [{		title : "accordion"	},{		title : "autocomplete"	},{		title : "chooseli"	},{		title : "dialog"	},{		title : "dropdown"	},{		title : "datetimepicker"	},{		title : "load"	},{		title : "tab"	},{		title : "mnyipt"	},{		title : "table"	},{		title : "table2"	},{		title : "tree"	},{		title : "vsrollist"	},{		title : "windropdown"	}] },{	title : "扩展指令",	children : [{		title : "tooltip"	},{		title : "per100"	}]},{	title : "过滤器",	children : [{		title : "currencydisplay"	}]}];var demoData = [];var pageObj = (function(navData){	var re = {};	avalon.each(navData,function(i,v){		avalon.each(v.children,function(i,v){			re[v.$hash || v.title] = demoData.length;			demoData.push({				name : v.title,				html : "加载中...",				$init : false,				$hash : v.$hash			});		})	});	return re;})(navData);function getSingleSpaces(space){	var len = 0;	for(var j=0;j<space.length;j++){		var ch = space[j];		if(ch === "\t"){			len += 2;		}else if(ch === " "){			len++;		}	}	return new Array(len + 1).join(" ");}function dealDemoHtml(html){	var div = document.createElement("div");	div.innerHTML = html;	var divs = div.getElementsByTagName('*');	for(var i=0,ii;ii=divs[i++];){		if(avalon(ii).hasClass("demo-code")){//采用自定义方式来显示code代码。如果确认使用highlight.js高亮插件，就不需要这里的逻辑了			var str = ii.innerHTML;			/*.replace(/[<>]/g,function(s){				if(s === '<')	return "&lt;";				if(s === '>') return "&gt;";			});*/			var arr = str.split("\n");			for(var j=arr.length-1;j>=0;j--){				var spaces = arr[j].match(/^\s+/);				if(!spaces){					arr.splice(j,1);				}			}			var spaces = arr[0].match(/^\s+/);			var singleSpaces = getSingleSpaces(spaces[0]);			for(var j=0;j<arr.length;j++){				spaces = arr[j].match(/^\s+/);				var s = getSingleSpaces(spaces[0]).replace(singleSpaces,"");				arr[j] = arr[j].replace(/^\s+/,s);			}			var textNode = document.createTextNode(arr.join("\n"));			ii.innerHTML = '';			ii.appendChild(textNode);			// ii.innerHTML = arr.join("<br>");		}	}	return div.innerHTML;}var vmodel = avalon.define({	$id : "body",	curIndex : -1,	demoData : demoData,	dealHashChange : function(func){		var page = location.hash.substring(1);		var target = pageObj[page];		if(target === undefined){			page = 'overview';			target = 0;		}		this.curIndex = target;		var demo = this.demoData[target];		if(!demo.$init){			require(["./_components/"+page],function(html){				demo.html = dealDemoHtml(html);refrashCode();				demo.$init = true;			});		}		avalon.vmodels.nav.findItem(function(item,i){			if((item.$hash || item.title) === page ){				this.selectPanel(i);				this.selectItem(item);refrashCode();				return true;			}		});			},	$navOpts : {		is : "ms-accordion",		$id : 'nav',		$multipleSel : true,		onSelectItem : function(item){			location.hash = item.$hash || item.title;		},		data : navData	}});vmodel.$watch("onReady",function(){	var vm = this;	setInterval(function(){		var page = document.querySelector("#page");		if(page && page.contentWindow){			try{				var h = page.contentWindow.document.body.offsetHeight;				page.style.height = h + "px";			}catch(ex){}		}	},200);	window.onhashchange = function(){		vm.dealHashChange();	};	vm.dealHashChange();});function refrashCode(){	//hljs.initHighlightingOnLoad();	$('pre code').each(function(i, block) {	    hljs.highlightBlock(block);	});}$(function(){	refrashCode();})